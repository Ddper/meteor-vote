<head>
  <title>实时投票</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  {{> vote}}
</body>

<template name="vote">
  {{#unless selected_name}}
    <div class="font_zi">点击项目投票</div>
  {{/unless}}
  <div>
    {{#each projects}}
      {{> project}}
    {{/each}}
  </div>

  {{#if selected_name}}}
  <div id="voteform" class="details">
      <div style="color:#0088cc;margin: 20px 20px 20px 20px;">
          {{#if voter}}{{voter}}，{{/if}}您要投的是：{{selected_name}}
      </div>
      <br/>
    {{#unless voter}}
    <input id="voter" type="text" name="voter" placeholder="请输入您的姓名" />
    {{/unless}}

    {{#if voted }}
    <span style="color:#0088cc;">您投的是{{selected_name}}</span>
    {{/if}}
    {{#unless voted}}
    <input type="button" class="inc btn" value="投票" />
    {{/unless}}
  </div>
  {{/if}}

  <div name="voted">
    {{#each voters}}
      {{> voted}}
    {{/each}}
  </div>
</template>

<template name="project">
  <div class="project ">
    <span class="name"><a href="javascript:;" class="">{{name}}</a></span>
  </div>
  <div class="progressbar">
    <div class="bar color1" style="width:{{progress}}%;"><span></span></div>
    <div class="label" style="left:{{progress}}%;"><span></span>{{score}}票</div>
  </div>
</template>

<template name="voted">
  <div style="margin: 20px 20px 20px 20px;">
    <span style="color:#0088cc;">{{voter}}投了<strong style="color: white;">{{project}}</strong>一票</span>
  </div>
</template>
